<!DOCTYPE html>
<html>
<head>
<title>Rondo Tracker</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css" rel="stylesheet" >

  <style>
  body {
    background-color: black;
    color: white;
  }

  div.name {
    font-size: 24pt;
  }
  div.total-value {
    font-size: 64pt;
  }

  i.x2 {
    font-size: 1.8em;
  }
  </style>

  <!-- script src="https://use.fontawesome.com/8c49f5639e.js"></script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
  <div class="container" >
    <div class="row" >
      <div id="player1-name" class="player-name col-sm-12 text-center name alert" data-player="1" >Player 1</div>
    </div>
    <div class="row" >
      <div class="col-sm-3 text-center align-middle alert alert-danger" data-bs-toggle="tooltip" data-bs-title="Attack" >
        <i class="mdi mdi-sword x2" ></i>
        <div id="player1-atk" class="total-value" >0</div>
        <div>
          <a class="add btn btn-lg btn-primary" data-player="1" data-attribute="atk" data-min="0" data-max="9" ><i class="mdi mdi-plus-circle" ></i><i class="mdi mdi-sword" ></i></a>
          <a class="sub btn btn-lg btn-primary" data-player="1" data-attribute="atk" data-min="0" data-max="9" ><i class="mdi mdi-minus-circle" ></i><i class="mdi mdi-sword" ></i></a>
        </div>
      </div>
      <div class="col-sm-3 text-center align-middle alert alert-success" data-bs-toggle="tooltip" data-bs-title="Voltage" >
        <i class="mdi mdi-lightning-bolt x2" ></i>
        <div id="player1-volt" class="total-value" >0</div>
        <div>
          <a class="add btn btn-lg btn-primary" data-player="1" data-attribute="volt" data-min="0" data-max="9" ><i class="mdi mdi-plus-circle "></i><i class="mdi mdi-lightning-bolt" ></i></a>
          <a class="sub btn btn-lg btn-primary" data-player="1" data-attribute="volt" data-min="0" data-max="9" ><i class="mdi mdi-minus-circle "></i><i class="mdi mdi-lightning-bolt" ></i></a>
        </div>
      </div>
      <div class="col-sm-3 text-center align-middle alert alert-info" data-bs-toggle="tooltip" data-bs-title="Defense" >
        <i class="mdi mdi-shield x2" ></i>
        <div id="player1-def" class="total-value" >0</div>
        <div>
          <a class="add btn btn-lg btn-primary" data-player="1" data-attribute="def" data-min="0" data-max="9" ><i class="mdi mdi-plus-circle" ></i><i class="mdi mdi-shield" ></i></a>
          <a class="sub btn btn-lg btn-primary" data-player="1" data-attribute="def" data-min="0" data-max="9" ><i class="mdi mdi-minus-circle" ></i><i class="mdi mdi-shield" ></i></a>
        </div>
      </div>
      <div class="col-sm-3 text-center align-middle alert alert-light" data-bs-toggle="tooltip" data-bs-title="Life" >
        <i class="mdi mdi-heart x2" ></i>
        <div id="player1-life" class="total-value" >15</div>
        <div>
          <a class="add btn btn-lg btn-primary" data-player="1" data-attribute="life" ><i class="mdi mdi-plus-circle" ></i><i class="mdi mdi-heart" ></i></a>
          <a class="sub btn btn-lg btn-primary" data-player="1" data-attribute="life" ><i class="mdi mdi-minus-circle" ></i><i class="mdi mdi-heart" ></i></a>
        </div>
      </div>
    </div>
    
    <hr />
    <div class="row" >
      <div class="col-sm-12 text-center" >
        <a id="reset" class="btn btn-lg btn-primary" >Reset</a>
        <a id="first-player" class="btn btn-lg btn-primary" >Who's First</a>
      </div>
    </div>
    <hr />

    <div class="row" >
      <div class="col-sm-3 text-center align-middle alert alert-danger" data-bs-toggle="tooltip" data-bs-title="Attack" >
        <i class="mdi mdi-sword x2" ></i>
        <div id="player2-atk" class="total-value" >0</div>
        <div>
          <a class="add btn btn-lg btn-primary" data-player="2" data-attribute="atk" data-min="0" data-max="9" ><i class="mdi mdi-plus-circle" ></i><i class="mdi mdi-sword" ></i></a>
          <a class="sub btn btn-lg btn-primary" data-player="2" data-attribute="atk" data-min="0" data-max="9" ><i class="mdi mdi-minus-circle" ></i><i class="mdi mdi-sword" ></i></a>
        </div>
      </div>
      <div class="col-sm-3 text-center align-middle alert alert-success" data-bs-toggle="tooltip" data-bs-title="Voltage" >
        <i class="mdi mdi-lightning-bolt x2" ></i>
        <div id="player2-volt" class="total-value" >0</div>
        <div>
          <a class="add btn btn-lg btn-primary" data-player="2" data-attribute="volt" data-min="0" data-max="9" ><i class="mdi mdi-plus-circle "></i><i class="mdi mdi-lightning-bolt" ></i></a>
          <a class="sub btn btn-lg btn-primary" data-player="2" data-attribute="volt" data-min="0" data-max="9" ><i class="mdi mdi-minus-circle "></i><i class="mdi mdi-lightning-bolt" ></i></a>
        </div>
      </div>
      <div class="col-sm-3 text-center align-middle alert alert-info" data-bs-toggle="tooltip" data-bs-title="Defense" >
        <i class="mdi mdi-shield x2" ></i>
        <div id="player2-def" class="total-value" >0</div>
        <div>
          <a class="add btn btn-lg btn-primary" data-player="2" data-attribute="def" data-min="0" data-max="9" ><i class="mdi mdi-plus-circle" ></i><i class="mdi mdi-shield" ></i></a>
          <a class="sub btn btn-lg btn-primary" data-player="2" data-attribute="def" data-min="0" data-max="9" ><i class="mdi mdi-minus-circle" ></i><i class="mdi mdi-shield" ></i></a>
        </div>
      </div>
      <div class="col-sm-3 text-center align-middle alert alert-light" data-bs-toggle="tooltip" data-bs-title="Life" >
        <i class="mdi mdi-heart x2" ></i>
        <div id="player2-life" class="total-value" >15</div>
        <div>
          <a class="add btn btn-lg btn-primary" data-player="2" data-attribute="life" ><i class="mdi mdi-plus-circle" ></i><i class="mdi mdi-heart" ></i></a>
          <a class="sub btn btn-lg btn-primary" data-player="2" data-attribute="life" ><i class="mdi mdi-minus-circle" ></i><i class="mdi mdi-heart" ></i></a>
        </div>
      </div>
    </div>
    <div class="row" >
      <div id="player2-name" class="player-name col-sm-12 text-center name alert" data-player="2" >Player 2</div>
    </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script>
  function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.ceil(max);
    return Math.floor(Math.random() * (max - min)) + min;
  }

  class Player {
    name = '';
    #attack = 0;
    #voltage = 0;
    #defense = 0;
    #life = 15;

    constructor(name) {
      this.name = name;
    }

    attr(attr_name, val) {
      switch (attr_name) {
        case 'atk':   return this.#attack = (val !== undefined) ? val : this.#attack;
        case 'volt':  return this.#voltage = (val !== undefined) ? val : this.#voltage;
        case 'def':   return this.#defense = (val !== undefined) ? val : this.#defense;
        case 'life':  return this.#life = (val !== undefined) ? val : this.#life;
      }
      return undefined;
    }
  };

  $(document).ready(function () {
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));

    const players = [ new Player('Player 1'), new Player('Player 2') ];

    const setLimits = function() {
      const limits = [ 'min', 'max' ];
      for (var i = 0; i < limits.length; ++i) {
        const lim = $(this).data(limits[i]);
        if (lim !== undefined && lim !== null && lim !== '') {
          $(this).data(limits[i], parseInt(lim));
        } else {
          $(this).data(limits[i], undefined);
        }
      }
    }
    $.each($('.add'), setLimits);
    $.each($('.sub'), setLimits);

    $('.player-name').click(function() {
      const player = $(this).data('player');
      var name = prompt('Player Name', players[player - 1].name);
      if (name !== undefined && name !== null && name !== '') {
        $(`.player${player}-name`).text(players[player - 1].name = name);
      }
    });

    const updateVal = function(players, delta) {
      return function() {
        const player = $(this).data('player');
        const attr = $(this).data('attribute');

        const min = $(this).data('min');
        const max = $(this).data('max');
        var val = players[player - 1].attr(attr) + delta;
        if (min !== undefined) {
          val = Math.max(min, val);
        }
        if (max !== undefined) {
          val = Math.min(val, max);
        }
        val = players[player - 1].attr(attr, val);
        $(`#player${player}-${attr}`).text(val);
      }
    };

    $('.add').click(updateVal(players,  1));
    $('.sub').click(updateVal(players, -1));

    $('#reset').click(function() {
      const attrs = [ 'atk', 'volt', 'def', 'life' ];
      players[0] = new Player(players[0].name);
      players[1] = new Player(players[1].name);

      $('#player1-name').removeClass('alert-dark');
      $('#player2-name').removeClass('alert-dark');

      for (var i = 0; i < attrs.length; ++i) {
        $(`#player1-${attrs[i]}`).text(players[0].attr(attrs[i]));
        $(`#player2-${attrs[i]}`).text(players[1].attr(attrs[i]));
      }
    });

    $('#first-player').click(function() {
      var selection = getRandomInt(0, 2) == 0;

      $('#player1-name').removeClass('alert-dark');
      $('#player2-name').removeClass('alert-dark');

      if (selection) {
        $('#player1-name').addClass('alert-dark');
      } else {
        $('#player2-name').addClass('alert-dark');
      }
    });
  });
  </script>
</body>
</html>
